<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NBA Game Prediction Dashboard</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        primary: '#5D5CDE',
                        'nba-red': '#C8102E',
                        'nba-blue': '#1D428A',
                        'nba-silver': '#C4CED4'
                    }
                }
            }
        }
    </script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap');
        body { font-family: 'Inter', sans-serif; }
    </style>
</head>
<body class="bg-white dark:bg-gray-900 text-gray-900 dark:text-white min-h-screen">
    <div class="container mx-auto px-4 py-6 max-w-7xl">
        <!-- Header -->
        <header class="mb-8">
            <div class="flex flex-col md:flex-row md:items-center md:justify-between">
                <div class="flex items-center space-x-4 mb-4 md:mb-0">
                    <div class="w-12 h-12 bg-gradient-to-r from-nba-red to-nba-blue rounded-lg flex items-center justify-center">
                        <span class="text-white font-bold text-xl">üèÄ</span>
                    </div>
                    <div>
                        <h1 class="text-3xl font-bold text-gray-900 dark:text-white">NBA Prediction Dashboard</h1>
                        <p class="text-gray-600 dark:text-gray-400">Advanced machine learning game predictions</p>
                    </div>
                </div>
                <div class="flex items-center space-x-4">
                    <div class="bg-green-100 dark:bg-green-900 px-4 py-2 rounded-lg">
                        <span class="text-green-800 dark:text-green-200 font-semibold">Model Accuracy: 68.3%</span>
                    </div>
                    <button id="refreshBtn" class="bg-primary text-white px-4 py-2 rounded-lg hover:bg-primary/90 transition-colors">
                        üîÑ Refresh Predictions
                    </button>
                </div>
            </div>
        </header>

        <!-- Filter Controls -->
        <div class="bg-gray-50 dark:bg-gray-800 rounded-xl p-6 mb-8">
            <h3 class="text-lg font-semibold mb-4">Filter Games</h3>
            <div class="grid grid-cols-1 md:grid-cols-4 gap-4">
                <select id="conferenceFilter" class="px-4 py-2 text-base border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 focus:ring-2 focus:ring-primary">
                    <option value="">All Conferences</option>
                    <option value="Eastern">Eastern Conference</option>
                    <option value="Western">Western Conference</option>
                    <option value="cross">Cross-Conference</option>
                </select>
                <select id="confidenceFilter" class="px-4 py-2 text-base border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 focus:ring-2 focus:ring-primary">
                    <option value="">All Confidence Levels</option>
                    <option value="high">High Confidence (70%+)</option>
                    <option value="medium">Medium Confidence (55-70%)</option>
                    <option value="low">Low Confidence (<55%)</option>
                </select>
                <select id="rivalryFilter" class="px-4 py-2 text-base border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 focus:ring-2 focus:ring-primary">
                    <option value="">All Matchups</option>
                    <option value="division">Division Rivals</option>
                    <option value="playoff">Playoff Implications</option>
                </select>
                <button id="clearFilters" class="bg-gray-300 dark:bg-gray-600 text-gray-700 dark:text-gray-300 px-4 py-2 rounded-lg hover:bg-gray-400 dark:hover:bg-gray-500 transition-colors">
                    Clear Filters
                </button>
            </div>
        </div>

        <!-- Stats Overview -->
        <div class="grid grid-cols-1 md:grid-cols-4 gap-6 mb-8">
            <div class="bg-gradient-to-r from-blue-500 to-blue-600 rounded-xl p-6 text-white">
                <div class="flex items-center justify-between">
                    <div>
                        <p class="text-blue-100">Games Today</p>
                        <p class="text-3xl font-bold" id="todayGames">8</p>
                    </div>
                    <div class="text-4xl opacity-80">üèÄ</div>
                </div>
            </div>
            <div class="bg-gradient-to-r from-green-500 to-green-600 rounded-xl p-6 text-white">
                <div class="flex items-center justify-between">
                    <div>
                        <p class="text-green-100">High Confidence</p>
                        <p class="text-3xl font-bold" id="highConfidence">5</p>
                    </div>
                    <div class="text-4xl opacity-80">‚úÖ</div>
                </div>
            </div>
            <div class="bg-gradient-to-r from-purple-500 to-purple-600 rounded-xl p-6 text-white">
                <div class="flex items-center justify-between">
                    <div>
                        <p class="text-purple-100">Avg Confidence</p>
                        <p class="text-3xl font-bold" id="avgConfidence">71.2%</p>
                    </div>
                    <div class="text-4xl opacity-80">üìä</div>
                </div>
            </div>
            <div class="bg-gradient-to-r from-orange-500 to-orange-600 rounded-xl p-6 text-white">
                <div class="flex items-center justify-between">
                    <div>
                        <p class="text-orange-100">Division Rivals</p>
                        <p class="text-3xl font-bold" id="rivalryGames">3</p>
                    </div>
                    <div class="text-4xl opacity-80">‚öîÔ∏è</div>
                </div>
            </div>
        </div>

        <!-- Game Predictions -->
        <div class="bg-white dark:bg-gray-800 rounded-xl shadow-lg">
            <div class="p-6 border-b border-gray-200 dark:border-gray-700">
                <h2 class="text-2xl font-bold">Today's Game Predictions</h2>
                <p class="text-gray-600 dark:text-gray-400 mt-1">Based on advanced machine learning model with 15+ features</p>
            </div>
            <div id="gamesList" class="divide-y divide-gray-200 dark:divide-gray-700">
                <!-- Games will be populated by JavaScript -->
            </div>
        </div>

        <!-- Model Performance -->
        <div class="grid grid-cols-1 lg:grid-cols-2 gap-8 mt-8">
            <div class="bg-white dark:bg-gray-800 rounded-xl shadow-lg p-6">
                <h3 class="text-xl font-bold mb-4">Model Performance</h3>
                <canvas id="performanceChart" width="400" height="300"></canvas>
            </div>
            <div class="bg-white dark:bg-gray-800 rounded-xl shadow-lg p-6">
                <h3 class="text-xl font-bold mb-4">Feature Importance</h3>
                <div class="space-y-4">
                    <div class="flex items-center justify-between">
                        <span class="text-sm">Home Team Implied Probability</span>
                        <div class="flex items-center space-x-2">
                            <div class="w-32 h-2 bg-gray-200 dark:bg-gray-700 rounded">
                                <div class="w-28 h-2 bg-primary rounded"></div>
                            </div>
                            <span class="text-sm font-semibold">0.87</span>
                        </div>
                    </div>
                    <div class="flex items-center justify-between">
                        <span class="text-sm">Point Spread Magnitude</span>
                        <div class="flex items-center space-x-2">
                            <div class="w-32 h-2 bg-gray-200 dark:bg-gray-700 rounded">
                                <div class="w-24 h-2 bg-primary rounded"></div>
                            </div>
                            <span class="text-sm font-semibold">0.75</span>
                        </div>
                    </div>
                    <div class="flex items-center justify-between">
                        <span class="text-sm">Conference Matchup</span>
                        <div class="flex items-center space-x-2">
                            <div class="w-32 h-2 bg-gray-200 dark:bg-gray-700 rounded">
                                <div class="w-20 h-2 bg-primary rounded"></div>
                            </div>
                            <span class="text-sm font-semibold">0.63</span>
                        </div>
                    </div>
                    <div class="flex items-center justify-between">
                        <span class="text-sm">Division Rivalry</span>
                        <div class="flex items-center space-x-2">
                            <div class="w-32 h-2 bg-gray-200 dark:bg-gray-700 rounded">
                                <div class="w-16 h-2 bg-primary rounded"></div>
                            </div>
                            <span class="text-sm font-semibold">0.51</span>
                        </div>
                    </div>
                    <div class="flex items-center justify-between">
                        <span class="text-sm">Is Weekend Game</span>
                        <div class="flex items-center space-x-2">
                            <div class="w-32 h-2 bg-gray-200 dark:bg-gray-700 rounded">
                                <div class="w-12 h-2 bg-primary rounded"></div>
                            </div>
                            <span class="text-sm font-semibold">0.38</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Footer -->
        <footer class="mt-12 text-center text-gray-600 dark:text-gray-400">
            <p>NBA Prediction Dashboard ‚Ä¢ Powered by Machine Learning ‚Ä¢ Last Updated: <span id="lastUpdated"></span></p>
            <p class="mt-2 text-sm">Disclaimer: Predictions are for entertainment purposes only. Please gamble responsibly.</p>
        </footer>
    </div>

    <script>
        // NBA team data with conferences and divisions
        const nbaTeams = {
            'Eastern': {
                'Atlantic': ['Boston Celtics', 'Brooklyn Nets', 'New York Knicks', 'Philadelphia 76ers', 'Toronto Raptors'],
                'Central': ['Chicago Bulls', 'Cleveland Cavaliers', 'Detroit Pistons', 'Indiana Pacers', 'Milwaukee Bucks'],
                'Southeast': ['Atlanta Hawks', 'Charlotte Hornets', 'Miami Heat', 'Orlando Magic', 'Washington Wizards']
            },
            'Western': {
                'Northwest': ['Denver Nuggets', 'Minnesota Timberwolves', 'Oklahoma City Thunder', 'Portland Trail Blazers', 'Utah Jazz'],
                'Pacific': ['Golden State Warriors', 'LA Clippers', 'Los Angeles Lakers', 'Phoenix Suns', 'Sacramento Kings'],
                'Southwest': ['Dallas Mavericks', 'Houston Rockets', 'Memphis Grizzlies', 'New Orleans Pelicans', 'San Antonio Spurs']
            }
        };

        // Flatten teams for easy access
        const allTeams = Object.values(nbaTeams).flatMap(conference => 
            Object.values(conference).flat()
        );

        // Generate mock game data based on your model features
        function generateMockGames() {
            const games = [];
            const today = new Date();
            
            for (let i = 0; i < 8; i++) {
                const awayTeam = allTeams[Math.floor(Math.random() * allTeams.length)];
                let homeTeam;
                do {
                    homeTeam = allTeams[Math.floor(Math.random() * allTeams.length)];
                } while (homeTeam === awayTeam);

                // Determine if same conference/division
                const awayConf = getTeamConference(awayTeam);
                const homeConf = getTeamConference(homeTeam);
                const awayDiv = getTeamDivision(awayTeam);
                const homeDiv = getTeamDivision(homeTeam);

                const sameConference = awayConf === homeConf;
                const sameDivision = awayDiv === homeDiv;

                // Generate betting odds and spread
                const spread = (Math.random() * 20 - 10).toFixed(1); // -10 to +10
                const homeMoneyLine = spread < 0 ? 
                    Math.floor(Math.random() * 200 + 100) : // Underdog
                    -Math.floor(Math.random() * 300 + 110); // Favorite
                const awayMoneyLine = spread > 0 ? 
                    Math.floor(Math.random() * 200 + 100) :
                    -Math.floor(Math.random() * 300 + 110);

                // Calculate implied probabilities
                const homeImpliedProb = homeMoneyLine > 0 ? 
                    100 / (homeMoneyLine + 100) : 
                    Math.abs(homeMoneyLine) / (Math.abs(homeMoneyLine) + 100);
                
                const awayImpliedProb = awayMoneyLine > 0 ? 
                    100 / (awayMoneyLine + 100) : 
                    Math.abs(awayMoneyLine) / (Math.abs(awayMoneyLine) + 100);

                // Apply model logic for prediction
                let homePredictionProb = homeImpliedProb;

                // Adjust for same division rivalry (slightly favor away team)
                if (sameDivision) {
                    homePredictionProb -= 0.02;
                }

                // Adjust for cross-conference play
                if (!sameConference) {
                    homePredictionProb += 0.01;
                }

                // Weekend effect
                const isWeekend = today.getDay() === 0 || today.getDay() === 6;
                if (isWeekend) {
                    homePredictionProb += 0.015;
                }

                // Add some randomness
                homePredictionProb += (Math.random() - 0.5) * 0.1;
                homePredictionProb = Math.max(0.15, Math.min(0.85, homePredictionProb));

                const confidence = Math.abs(homePredictionProb - 0.5) * 2;
                const predictedWinner = homePredictionProb > 0.5 ? homeTeam : awayTeam;

                games.push({
                    id: i + 1,
                    awayTeam,
                    homeTeam,
                    spread: parseFloat(spread),
                    homeMoneyLine,
                    awayMoneyLine,
                    homeImpliedProb,
                    awayImpliedProb,
                    homePredictionProb,
                    confidence,
                    predictedWinner,
                    sameConference,
                    sameDivision,
                    isWeekend,
                    gameTime: new Date(today.getTime() + i * 2 * 60 * 60 * 1000).toLocaleTimeString([], {hour: '2-digit', minute:'2-digit'}),
                    awayConference: awayConf,
                    homeConference: homeConf
                });
            }

            return games;
        }

        function getTeamConference(team) {
            for (const [conf, divisions] of Object.entries(nbaTeams)) {
                for (const teams of Object.values(divisions)) {
                    if (teams.includes(team)) return conf;
                }
            }
            return 'Unknown';
        }

        function getTeamDivision(team) {
            for (const [conf, divisions] of Object.entries(nbaTeams)) {
                for (const [div, teams] of Object.entries(divisions)) {
                    if (teams.includes(team)) return div;
                }
            }
            return 'Unknown';
        }

        let currentGames = generateMockGames();
        let filteredGames = [...currentGames];

        function renderGames() {
            const gamesList = document.getElementById('gamesList');
            gamesList.innerHTML = '';

            filteredGames.forEach(game => {
                const confidenceLevel = game.confidence > 0.7 ? 'high' : game.confidence > 0.55 ? 'medium' : 'low';
                const confidenceColor = confidenceLevel === 'high' ? 'text-green-600 dark:text-green-400' :
                                      confidenceLevel === 'medium' ? 'text-yellow-600 dark:text-yellow-400' :
                                      'text-gray-600 dark:text-gray-400';

                const gameDiv = document.createElement('div');
                gameDiv.className = 'p-6 hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors';
                gameDiv.innerHTML = `
                    <div class="flex flex-col lg:flex-row lg:items-center lg:justify-between space-y-4 lg:space-y-0">
                        <div class="flex items-center space-x-6">
                            <div class="text-center min-w-0">
                                <div class="text-sm text-gray-500 dark:text-gray-400">${game.gameTime}</div>
                                <div class="text-xs ${game.sameDivision ? 'text-red-500' : game.sameConference ? 'text-yellow-500' : 'text-blue-500'}">
                                    ${game.sameDivision ? 'Division Rival' : game.sameConference ? 'Conference' : 'Cross-Conf'}
                                </div>
                            </div>
                            <div class="flex flex-col space-y-2 min-w-0">
                                <div class="flex items-center space-x-3">
                                    <span class="text-lg font-semibold truncate">${game.awayTeam}</span>
                                    <span class="text-sm text-gray-500">@</span>
                                    <span class="text-lg font-semibold truncate">${game.homeTeam}</span>
                                </div>
                                <div class="flex items-center space-x-4 text-sm text-gray-600 dark:text-gray-400">
                                    <span>Spread: ${game.spread > 0 ? '+' : ''}${game.spread}</span>
                                    <span>O/U: ${(Math.random() * 40 + 200).toFixed(1)}</span>
                                </div>
                            </div>
                        </div>
                        
                        <div class="flex flex-col lg:flex-row lg:items-center space-y-4 lg:space-y-0 lg:space-x-6">
                            <div class="text-center">
                                <div class="text-lg font-bold ${game.predictedWinner === game.homeTeam ? 'text-green-600 dark:text-green-400' : 'text-blue-600 dark:text-blue-400'}">
                                    ${game.predictedWinner}
                                </div>
                                <div class="text-sm text-gray-500">Predicted Winner</div>
                            </div>
                            
                            <div class="text-center">
                                <div class="text-2xl font-bold ${confidenceColor}">
                                    ${(game.confidence * 100).toFixed(1)}%
                                </div>
                                <div class="text-sm text-gray-500">Confidence</div>
                            </div>
                            
                            <div class="text-center">
                                <div class="text-sm text-gray-600 dark:text-gray-400">
                                    ML: ${game.homeMoneyLine > 0 ? '+' : ''}${game.homeMoneyLine} / ${game.awayMoneyLine > 0 ? '+' : ''}${game.awayMoneyLine}
                                </div>
                                <div class="text-xs text-gray-500">Home / Away</div>
                            </div>
                        </div>
                    </div>
                `;
                gamesList.appendChild(gameDiv);
            });

            updateStats();
        }

        function updateStats() {
            document.getElementById('todayGames').textContent = filteredGames.length;
            document.getElementById('highConfidence').textContent = filteredGames.filter(g => g.confidence > 0.7).length;
            document.getElementById('avgConfidence').textContent = (filteredGames.reduce((sum, g) => sum + g.confidence, 0) / filteredGames.length * 100).toFixed(1) + '%';
            document.getElementById('rivalryGames').textContent = filteredGames.filter(g => g.sameDivision).length;
        }

        function applyFilters() {
            const conferenceFilter = document.getElementById('conferenceFilter').value;
            const confidenceFilter = document.getElementById('confidenceFilter').value;
            const rivalryFilter = document.getElementById('rivalryFilter').value;

            filteredGames = currentGames.filter(game => {
                let includeGame = true;

                // Conference filter
                if (conferenceFilter === 'Eastern' && game.homeConference !== 'Eastern' && game.awayConference !== 'Eastern') {
                    includeGame = false;
                } else if (conferenceFilter === 'Western' && game.homeConference !== 'Western' && game.awayConference !== 'Western') {
                    includeGame = false;
                } else if (conferenceFilter === 'cross' && game.sameConference) {
                    includeGame = false;
                }

                // Confidence filter
                if (confidenceFilter === 'high' && game.confidence <= 0.7) {
                    includeGame = false;
                } else if (confidenceFilter === 'medium' && (game.confidence < 0.55 || game.confidence > 0.7)) {
                    includeGame = false;
                } else if (confidenceFilter === 'low' && game.confidence >= 0.55) {
                    includeGame = false;
                }

                // Rivalry filter
                if (rivalryFilter === 'division' && !game.sameDivision) {
                    includeGame = false;
                } else if (rivalryFilter === 'playoff' && game.confidence < 0.6) {
                    includeGame = false;
                }

                return includeGame;
            });

            renderGames();
        }

        function createPerformanceChart() {
            const ctx = document.getElementById('performanceChart').getContext('2d');
            new Chart(ctx, {
                type: 'line',
                data: {
                    labels: ['Week 1', 'Week 2', 'Week 3', 'Week 4', 'Week 5', 'Week 6', 'Week 7', 'Week 8'],
                    datasets: [{
                        label: 'Model Accuracy',
                        data: [62.5, 65.2, 67.8, 66.1, 68.9, 70.2, 69.5, 68.3],
                        borderColor: '#5D5CDE',
                        backgroundColor: '#5D5CDE20',
                        tension: 0.3,
                        fill: true
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            labels: {
                                color: document.documentElement.classList.contains('dark') ? '#ffffff' : '#000000'
                            }
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: false,
                            min: 55,
                            max: 75,
                            ticks: {
                                color: document.documentElement.classList.contains('dark') ? '#ffffff' : '#000000',
                                callback: function(value) {
                                    return value + '%';
                                }
                            },
                            grid: {
                                color: document.documentElement.classList.contains('dark') ? '#374151' : '#e5e7eb'
                            }
                        },
                        x: {
                            ticks: {
                                color: document.documentElement.classList.contains('dark') ? '#ffffff' : '#000000'
                            },
                            grid: {
                                color: document.documentElement.classList.contains('dark') ? '#374151' : '#e5e7eb'
                            }
                        }
                    }
                }
            });
        }

        // Dark mode detection
        if (window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches) {
            document.documentElement.classList.add('dark');
        }
        window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change', event => {
            if (event.matches) {
                document.documentElement.classList.add('dark');
            } else {
                document.documentElement.classList.remove('dark');
            }
        });

        // Event listeners
        document.getElementById('refreshBtn').addEventListener('click', () => {
            currentGames = generateMockGames();
            applyFilters();
        });

        document.getElementById('conferenceFilter').addEventListener('change', applyFilters);
        document.getElementById('confidenceFilter').addEventListener('change', applyFilters);
        document.getElementById('rivalryFilter').addEventListener('change', applyFilters);

        document.getElementById('clearFilters').addEventListener('click', () => {
            document.getElementById('conferenceFilter').value = '';
            document.getElementById('confidenceFilter').value = '';
            document.getElementById('rivalryFilter').value = '';
            filteredGames = [...currentGames];
            renderGames();
        });

        // Initialize
        document.addEventListener('DOMContentLoaded', () => {
            renderGames();
            createPerformanceChart();
            document.getElementById('lastUpdated').textContent = new Date().toLocaleString();
        });
    </script>
</body>
</html>
